<!DOCTYPE html>
<html lang="en">

 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta http-equiv="X-UA-Compatible" content="ie=edge" />
   <title>The Politics of Covid</title>

   <!--Bootstrap_CDN and plotly leaflet CSS and style.css-->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" >
   <link rel="stylesheet" href="css/style.css">

    <!--Plotly-->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
   
   <!--Leaflet-->
   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>
   

   <!--Leaflet JavaScript-->
   <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
   
   <!--API-->
   <script type="text/javascript" src = "config.js"></script>
   <!--JavaScript-->
   <scipt type="text/javascript" src = "logic.js"></scipt>

</head>
 
 <!--Header-->
 <body>
    <div class="container">
        <div class="row">
           <div class='col-md-12 jumbotron text-left' style="background-image:url('images/woman_in_mask.png'); border: thick double; color:black">
                <p style = "font-family: Roboto, RobotoDraft, Helvetica,Arial,sans-serif;">
                    <h1>The<br>Politics<br>of<br>Covid</h1>
                </p>
            </div>

           <!--Tab Buttons-->
            
                <div class= 'tab'>
                    <button class = "tablinks" onclick= "openCity (event, 'About Our Project')">About Our Project</button>
                    <button class = "tablinks" onclick= "openCity (event, 'Database')">Database</button>
                    <button class = "tablinks" onclick= "openCity (event, 'Machine Learning')">Machine Learning</button>
                    <button class = "tablinks" onclick= "openCity (event, 'Dashboard')">Dashboard</button>
                    <button class = "tablinks" onclick= "openCity (event, 'Race vs Cases/Deaths')">Race vs Cases/Deaths</button>
                    <button class = "tablinks" onclick= "openCity (event, 'Economics vs Cases/Deaths')">Economics vs Cases/Deaths</button>
                    <button class = "tablinks" onclick= "openCity (event, 'Team Members')">Team Members</button>
                </div>

                <!--Add contents to Tabs-->
                <div class= "tabcontent" id="About Our Project">
                    <h2>About Our Project</h2>
                    <p>Using data acquired from multiple sources, we set out to discover if there are correlations 
                    with Covid 19 rates of infection and a countie's political views,  the race makeup or ethnicity, age, gender or economic status of it's population. </p>
                </div>   
                
                <!--Database-->
                <div class= "tabcontent" id="Database">
                    <h2>Database</h2>
                    <p>To allow for the greatest possible diversity, or data was drawn from over 3000 counties in the
                        United States.  Our data was obtained from the United States Census Bureau, the Association of Statisticians
                        of American Religious Bodies (ASARB) as well as Covid 19 rates of infection and death rates from Kaggle. </p>
                    <h3>Process</h3>
                    <h4>Part One</h4>
                    <p>From the intitial research, four csv files containing a total of 53 data points for 3049 counties was retrieved. Using Pandas, 
                        the four csv files were converted to dataframes then organized, data was converted to usuable numbers where needed and null values were 
                        converted to zeros.</p>
                    <h4>Part Two</h4>
                    <p>Creating the Join Key: To perform a join, there needs to be a field to join on. A common field native to the data was available so one 
                        was created. A column was created to hold the key and then set the value equal to the result of county and state column data combined in each row. 
                        County data was then used as the primary table because it had the most results.</p>
                    <p>Joining in Parts: To execute the join, the two tables were joined into an interim table, table_one, and then a third table was joined, creating a table_two. 
                        This process was repeated again to join the fourth table into the final database.</p>
                    <p>Troubleshooting Issues: The fields that were null after the joins from part two needed to be filled in in order to not obstruct the upcoming machine learning model. 
                        The null values were converted into zeros and the result saved.</p>
                    
                </div> 

                <!--Machine Learning-->
                <div class= "tabcontent" id="Machine Learning">
                    <h2>Machine Learning</h2>
                    <p>The goal of the machine learning aspect of this project is to predict if a county’s voting patterns in the 2020 election are correlated to covid 
                        transmission. Specifically, looking at the percentage of votes for Donald Trump and the percentage of votes for Joe Biden and the number of covid 
                        cases per county were used to make predictions. </p>
                    <h3>Models Used</h3>
                    <p>An Ordinary Least Squares (OLS) Model was used to analyze one independent variable at a time and its relation to the dependent variable- covid cases. 
                        A Random Forest Regressor (RFR) model was used to analyze multiple independent variables in relation to the dependent variable- covid cases. 
                        The OLS model was chosen for its ability to produce descriptive summary statistics and for its ability to be graphed using statsmodels packages. 
                        The RFR model was used for its ability to rank feature importances and for its compatibility with other sklearn packages such as RobustScaler, 
                        Principal Component Analysis (PCA), and Train, Test, Split.</p>
                    <h3>Scaling and Data Preprocessing</h3>
                    <p>For the OLS model, a new column was created titled “normalized_cases” which was created by dividing the number of covid cases per county by the population
                         of that county. This created a more usable variable because it more closely resembled the format of the percentage of votes for Trump and Biden columns. 
                         Because both of these columns contained numbers between 0 and 1, it behaved better in the OLS model.</p>
                    <p>For the RFR model, the Robust Scaler was used because of its ability to handle outliers by using the interquartile range to scale the data. 
                        The “normalized_cases” column was not used in the RFR model to preserve the original data format for the correlation matrix and for the ranking of 
                        feature importance. For both models, the data was preprocessed by another team member to include religion and age metrics by county from other datasets. 
                        This was helpful for the correlation matrix and for the ranking of feature importance.</p>
                    <h3>Scaling and Data Preprocessing</h3>
                    <p></p>

                    
                </div> 

                <!--Dashboard-->
                <div class= "tabcontent" id="Dashboard">
                    <h1>Population</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Id nibh pellentesque eget imperdiet quam lobortis et id. Phasellus tristique euismod quisque tortor eget mollis ultricies. Vel quam nunc, et tellus eu in. Semper scelerisque amet eget dictum sit. Vulputate bibendum rutrum vitae viverra sit. Quam aliquet at lectus sit mus non diam lectus.
                        Semper scelerisque sed risus posuere molestie sed sed feugiat. Erat adipiscing vehicula nec platea sollicitudin enim dictum faucibus adipiscing. Mattis sollicitudin vulputate massa vivamus facilisis. </p>
                </div> 

                <!--Race vs Cases/Deaths-->
                <div class= "tabcontent" id="Race vs Cases/Deaths">
                    <h1>Race vs Cases/Deaths</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Id nibh pellentesque eget imperdiet quam lobortis et id. Phasellus tristique euismod quisque tortor eget mollis ultricies. Vel quam nunc, et tellus eu in. Semper scelerisque amet eget dictum sit. Vulputate bibendum rutrum vitae viverra sit. Quam aliquet at lectus sit mus non diam lectus.
                        Semper scelerisque sed risus posuere molestie sed sed feugiat. Erat adipiscing vehicula nec platea sollicitudin enim dictum faucibus adipiscing. Mattis sollicitudin vulputate massa vivamus facilisis. </p>
                </div>
                
                <!--Economics vs Cases/Deaths-->
                <div class= "tabcontent" id="Economics vs Cases/Deaths">
                    <h1>Economics vs Cases/Deaths</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Id nibh pellentesque eget imperdiet quam lobortis et id. Phasellus tristique euismod quisque tortor eget mollis ultricies. Vel quam nunc, et tellus eu in. Semper scelerisque amet eget dictum sit. Vulputate bibendum rutrum vitae viverra sit. Quam aliquet at lectus sit mus non diam lectus.
                        Semper scelerisque sed risus posuere molestie sed sed feugiat. Erat adipiscing vehicula nec platea sollicitudin enim dictum faucibus adipiscing. Mattis sollicitudin vulputate massa vivamus facilisis. </p>
                </div>
                
                <!--Team Members-->
                <div class= "tabcontent" id="Team Members">
                    <h1>Team Members</h1>
                    <p> In Alphabetical Order</p>
                    <p> Stephen Anayas-Hilliard</p>
                    <p> John Phillips</p>
                    <p> Melyssa Sibal</p>
                    <p> Isaac D. Tucker-Rasbury</p>
                </div>  
                
                <!-- Open Tab Contents when Tab is click upon -->
                <script type="text/javascript">
                    function openCity (event, cityName){
                        
                        //Declare the variables
                        var i, tabcontent, tablinks;
                        
                        // Get all Elements with tab_content and hide them
                        tabcontent = document.getElementsByClassName("tabcontent");
                        for(i= 0; i < tabcontent.length; i++){
                            tabcontent[i].style.display = "none";
                        }

                        //Get all the elements with class "tablinks" and remove the class
                        tablinks = document.getElementsByClassName("tablinks"); 
                        for(i = 0; i < tablinks.length; i++){
                            tablinks[i].className = tablinks[i].className.replace(" active", "");
                        }

                        // Show the Current Tab and add an "active" class to the button that opened the tab 
                        // so that it becomes the active tab
                        document.getElementById(cityName).style.display = "block";
                        evt.currentTarget.className += " active";
                    }
                 
                    </script>
        </div>
                <!-- Dropdown menu with County and State-->
                <div class = "row">
                    <div class ="dropdown">
                        <div class="col-md-12";>
                            <h4><span style='color:white'>County and State</span></h4>
                                <!--Dropdown menu with id of selDataset-->
                                <select id="selDataset" onchange="buildMetadata(this.selectedIndex);buildCharts(this.selectedIndex)"></select>
                            </div>
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                  <h3 class = "panel-title">County Demographics</h3>
                            </div>
                            <div id="sample-metadata" class="panel-body"></div>
                            
                                </div>
                            </div>        
                        
                        </div>
                        
                <!--Information Panel-->
                <div class = 'row'>
                    
                    <!--Voting Bar Graph-->
                        <div class="col-lg-4">
                            <div id = 'bar'></div>
                        </div>  
                    <div class="col-lg-4">
                            <div id = 'pie'></div>
                    </div> 
                    <div class="col-lg-4">
                        <div id ='pie2'>
                        </div>
                    </div>
                      
                </div> 

                <!--Occupation Bar Graph-->
                <div class = 'row'>
                    
                        <div class= 'col-lg-12'>
                            <div id='bar2'>

                            </div>
                        </div>

                    </div>

                
              
                <!--Population Bubble-->
                <div class="row"> 
                    <!--<div class='panel-body'>-->
                        <div class="col-lg-12">
                            <div id='bubble'>
                                
                            </div>

                        </div>
                    </div>
                </div>

                

                <!--Div that holds are you map-->
                <div id="mapid"></div>
                    <div class = 'panel-body'>
                        <div class= "col-lg-12">

                        </div>
                    </div>

               

                
                

                
                
                
    </div>
        

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
   
    <script src="script.js"></script>
   
   

    
    
  </body>
  </html>      
                   


      
  